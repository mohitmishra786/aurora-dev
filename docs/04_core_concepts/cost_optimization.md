# Cost Optimization

Maximizing intelligence per dollar.

**Last Updated:** February 8, 2026
**Audience:** Finance, Project Managers

> **Before Reading This**
>
> You should understand:
> - [Managing Costs](../05_user_guides/managing_costs.md)
> - [Agent Assignment](./agent_assignment.md)

## The Token Economy

Every character generated by an LLM costs money. A complex feature might consume 500k input tokens (reading code) and 50k output tokens (writing code). At $15/1M tokens, this adds up fast.

Cost Optimization is not about being cheap; it's about being efficient. We want to spend money on *hard problems* and save money on *easy problems*.

## Tiered Model Routing

We use a "Model Router" to direct traffic.

| Tier | Model | Cost | Use Case |
|------|-------|------|----------|
| **S-Tier** | Claude 3 Opus | $$$$ | Architecture, Complex Debugging, Security Audits |
| **A-Tier** | Claude 3 Sonnet | $$ | Writing standard CRUD code, Writing Tests |
| **B-Tier** | Claude 3 Haiku | $ | Log analysis, git commit messages, spell check |

By routing the "Write a commit message" task to Haiku instead of Opus, we save 98% of the cost for that operation.

## Caching Strategy

We implement **Prompt Caching** (where supported) and **Result Caching**.
If you ask the agent "Explain the codebase" twice, the second time should cost $0. The result is served from the redis cache.

## Budgeting Controls

The `aurora.yaml` file allows you to set hard limits.

```yaml
project:
  budget:
    daily_limit: $10.00
    alert_at: 80%
    hard_stop: true
```

If the daily limit is reached, the `Maestro Agent` pauses all non-critical tasks and notifies the user. "I have stopped working to save your wallet. Approve more budget to continue."

## Token Reduction

We aggressively prune whitespace and comments from context files before sending them to the API. We also strip out large data literals (e.g., a 1MB Base64 string in a test file) and replace them with `[DATA REMOVED]`.

## Related Reading

- [Managing Costs](../05_user_guides/managing_costs.md)
- [Agent Assignment](./agent_assignment.md)

## What's Next

- [Quality Gates](./quality_gates.md)
