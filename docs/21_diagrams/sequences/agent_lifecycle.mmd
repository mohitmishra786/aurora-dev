stateDiagram-v2
    %% Agent Lifecycle State Machine
    
    [*] --> IDLE
    
    IDLE --> ASSIGNED : Maestro assigns task
    ASSIGNED --> PLANNING : Agent accepts
    
    PLANNING --> EXECUTING : Plan approved
    
    EXECUTING --> WAITING : External dependency
    WAITING --> EXECUTING : Dependency resolved
    
    EXECUTING --> VERIFYING : Code complete
    
    VERIFYING --> COMPLETE : Tests pass
    VERIFYING --> REFLECTING : Tests fail
    
    REFLECTING --> EXECUTING : New strategy
    
    COMPLETE --> IDLE : Report success
    
    EXECUTING --> ERROR : Runtime exception
    ERROR --> IDLE : Reset
